/**
 * Language switcher functionality
 */
document.addEventListener('DOMContentLoaded', function() {
    const languageSwitcher = document.getElementById('languageSwitcher');

    // Check for saved language preference
    const savedLanguage = localStorage.getItem('language');
    if (savedLanguage) {
        document.documentElement.setAttribute('lang', savedLanguage);
        updateLanguage(savedLanguage);
    }

    // Switch language
    languageSwitcher.addEventListener('click', () => {
        const currentLanguage = document.documentElement.getAttribute('lang');
        const newLanguage = currentLanguage === 'zh-TW' ? 'en' : 'zh-TW';

        document.documentElement.setAttribute('lang', newLanguage);
        localStorage.setItem('language', newLanguage);

        updateLanguage(newLanguage);
    });

    // Update page content based on language
    function updateLanguage(language) {
        // Get all elements with data-i18n attribute
        const elements = document.querySelectorAll('[data-i18n]');

        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            element.textContent = translations[language][key] || element.textContent;
        });
    }
});

// Translations dictionary
const translations = {
    'zh-TW': {
        'pageTitle': '課程管理系統',
        'login': '登入',
        'register': '註冊',
        'profile': '個人資料',
        'myComments': '我的評論',
        'myVotes': '我的投票',
        'votes': '票',
        'totalVotes': '總投票數',
        'alreadyVoted': '您已對此投票進行了投票',
        'selectOneOption': '請選取其中一個選項',
        'pollResults': '投票結果',
        'logout': '登出',
        'welcome': '歡迎來到課程管理系統',
        'explore': '探索課程、參與投票，提升您的學習體驗',
        'registerNow': '立即註冊',
        'latestCourses': '最新課程',
        'courseManagement': '課程管理系統',
        'qualityLearning': '提供最優質的線上學習體驗',
        'quickLinks': '快速連結',
        'home': '首頁',
        'about': '關於我們',
        'contact': '聯絡我們',
        'contactInfo': '聯絡資訊',
        'copyright': '保留所有權利',
        'learningResources': '學習資源',
        'allCourses': '所有課程',
        'allPolls': '所有投票',
        'teacherFeatures': '教師功能',
        'addCourse': '新增課程',
        'createPoll': '建立投票',
        'createNewPoll': '建立新投票',
        'adminPanel': '管理面板',
        'latestPolls': '最新投票',
        'viewDetails': '查看詳情',
        'files': '個檔案',
        'comments': '條評論',
        'participate': '參與投票',
        'hongKong': '香港都會大學',
        'email': '電子郵件',
        'myemail': 'www.hkmu.edu.hk',
        'phone': '(852) 2711 2100',
        'phoneField': '電話號碼',
        'close': '關閉',
        'userLogin': '使用者登入',
        'loginFailed': '登入失敗：用戶名或密碼不正確。',
        'logoutSuccess': '您已成功登出。',
        'username': '用戶名',
        'password': '密碼',
        'loginButton': '登入',
        'registerNewAccount': '註冊新帳號',
        'pleaseLoginFirst': '請先登入',
        'loginToParticipate': '請登入後參與討論',
        'allCoursesTitle': '所有課程',
        'noCoursesYet': '目前還沒有任何課程。',
        'filesCount': '個檔案',
        'commentsCount': '條評論',
        'chooseOption': '選擇選項',
        'postComment': '發表評論',
        'downloadAllFiles': '下載所有檔案',
        'download': '下載',
        'kb': 'KB',
        'courseFiles': '課程文件',
        'pollQuestion': '投票問題',
        'createdAt': '建立於',
        'saveChanges': '儲存變更',
        'cancel': '取消',
        'editUser': '編輯使用者',
        'fullName': '全名',
        'role': '角色',
        'student': '學生',
        'teacher': '教師',
        'deleteCourseConfirmation': '刪除課程確認',
        'confirmDelete': '確認刪除',
        'deleteWarning': '您確定要刪除此課程嗎？此操作無法撤銷。',
        'deleteCourse': '刪除課程',
        'courseDetails': '課程詳情',
        'courseTitle': '課程標題',
        'description': '描述',
        'noDescription': '暫無描述',
        'fileCount': '檔案數量',
        'commentCount': '評論數量',
        'confirmDeleteText': '我已了解此操作的風險，並確認要刪除此課程及其所有相關內容。',
        'votingOption': '投票選項',
        'delete': '刪除',
        'deleteComment': '刪除評論',
        'edit': '編輯',
        'editCourse': '編輯課程',
        'uploadFiles': '上傳額外檔案',
        'currentFiles': '目前檔案',
        'noFiles': '暫無檔案',
        'multipleFileUpload': '您可以一次選擇多個檔案進行上傳。',
        'changeVoteTitle': '變更投票: ',
        'selectNewVote': '請選擇您想要變更為的新投票選項',
        'selectNewOption': '選擇新選項',
        'currentSelection': '您目前的選擇',
        'submitNewVote': '提交變更投票',
        'clearQuestion': '設計一個清晰、明確的問題',
        'pollOptions': '投票選項',
        'option': '選項',
        'endDate': '結束日期',
        'endDateHint': '設定投票的結束時間',
        'back': '返回',
        'deletePoll': '刪除投票',
        'confirmDeletePoll': '您確定要刪除此投票嗎？此操作無法撤銷。',
        'myVoteHistory': '我的投票歷史',
        'noVoteHistory': '您尚未參與任何投票。',
        'yourChoice': '您的選擇',
        'voteTime': '投票時間',
        'returnHome': '返回首頁',
        'currentResults': '目前投票結果',
        'yourCurrentChoice': '您目前的選擇',
        'changeVote': '變更投票',
        'commentsSection': '評論區',
        'courseDescription': '課程描述',
        'addNewCourseMaterial': '新增課程材料',
        'userManagement': '用戶管理',
        'actions': '操作',
        'writeComment': '輸入評論...',
        'addnewcoursematerial': '新增課程材料',
        'deleteCourseConfirmation': '刪除課程確認',
        'ctitle': '課程標題',
        'cdescription': '課程描述',
        'LectureNotes': '講義(PDF、文件等)',
        'availableCourses': '可用課程',
        "activePolls": "進行中的投票",
        'accountType': '帳戶類型',
        'noCoursesYet': '目前還沒有任何課程。',
        'noPollsYet': '目前還沒有任何投票。',
        'voteNow': '立即投票',
        'teacherToolsDesc':'作為教師，您可以創建新課程、管理現有課程和創建投票活動。充分利用這些功能，為您的學生提供最佳的學習體驗。',
        'loginPrompt': '登入以獲得個人化的學習體驗、參與討論並存取所有課程內容。',
        'loginNow' : '立即登入',
        'alreadyMember': '已有帳號？',
        'teacherTools': '教師工具',
        'submitVote': '提交投票',
        'editFiles': '編輯檔案',
        'viewAll': '檢視全部',
        'noCommentsYet': '目前還沒有評論，成為第一個留言的人吧！',
        'createNewCourse': '創建新課程',
        'Profile': '個人資料',
        'UpdateProfile': '更新個人資料',
        'pphone': '電話號碼',
        'MyCommentHistory': '我的評論歷史',
        'noCommentHistory': '您尚未發表任何評論。',
        'ViewCourse': '檢視課程',
        'ViewPoll': '檢視投票',
        'backToCourseList': '返回課程列表',

    },
    'en': {
        'totalVotes': 'Total Votes',
        'postComment': 'Post Comment',
        'votes': 'Votes',
        'pageTitle': 'Course Management System',
        'login': 'Login',
        'register': 'Register',
        'profile': 'Profile',
        'myComments': 'My Comments',
        'myVotes': 'My Votes',
        'alreadyVoted': 'You have already voted on this poll',
        'selectOneOption': 'Please select one of the options',
        'pollResults': 'Voting results',
        'logout': 'Logout',
        'welcome': 'Welcome to Course Management System',
        'explore': 'Explore courses, participate in polls, enhance your learning experience',
        'registerNow': 'Register Now',
        'latestCourses': 'Latest Courses',
        'courseManagement': 'Course Management System',
        'qualityLearning': 'Providing the best online learning experience',
        'quickLinks': 'Quick Links',
        'home': 'Home',
        'about': 'About Us',
        'contact': 'Contact Us',
        'contactInfo': 'Contact Information',
        'copyright': 'All Rights Reserved',
        'learningResources': 'Learning Resources',
        'allCourses': 'All Courses',
        'allPolls': 'All Polls',
        'teacherFeatures': 'Teacher Features',
        'addCourse': 'Add Course',
        'createPoll': 'Create Poll',
        'createNewPoll': 'Create New Poll',
        'adminPanel': 'Admin Panel',
        'latestPolls': 'Latest Polls',
        'viewDetails': 'View Details',
        'files': 'files',
        'comments': 'comments',
        'participate': 'Participate',
        'hongKong': 'Hong Kong Metropolitan University',
        'email': 'email',
        'myemail': 'www.hkmu.edu.hk',
        'phone': '(852) 2711 2100',
        'phoneField': 'Phone Number',
        'close': 'Close',
        'userLogin': 'User Login',
        'loginFailed': 'Login failed: Invalid username or password.',
        'logoutSuccess': 'You have been successfully logged out.',
        'username': 'Username',
        'password': 'Password',
        'loginButton': 'Login',
        'registerNewAccount': 'Register New Account',
        'pleaseLoginFirst': 'Please login first',
        'loginToParticipate': 'Please login to participate in the discussion',
        'allCoursesTitle': 'All Courses',
        'noCoursesYet': 'No courses available yet.',
        'filesCount': 'files',
        'commentsCount': 'comments',
        'chooseOption': 'Choose Option',
        'downloadAllFiles': 'Download All Files',
        'download': 'Download',
        'kb': 'KB',
        'courseFiles': 'Course Files',
        'pollQuestion': 'Poll Question',
        'createdAt': 'Created At',
        'saveChanges': 'Save Changes',
        'cancel': 'Cancel',
        'editUser': 'Edit User',
        'fullName': 'Full Name',
        'role': 'Role',
        'student': 'Student',
        'teacher': 'Teacher',
        'deleteCourseConfirmation': 'Delete Course Confirmation',
        'confirmDelete': 'Confirm Delete',
        'deleteWarning': 'Are you sure you want to delete this course? This action cannot be undone.',
        'deleteCourse': 'Delete Course',
        'courseDetails': 'Course Details',
        'courseTitle': 'Course Title',
        'description': 'Description',
        'noDescription': 'No description available',
        'fileCount': 'File Count',
        'commentCount': 'Comment Count',
        'confirmDeleteText': 'I understand the risks of this action and confirm that I want to delete this course and all related content.',
        'votingOption': 'Voting Option',
        'delete': 'Delete',
        'deleteComment': 'Delete Comment',
        'edit': 'Edit',
        'editCourse': 'Edit Course',
        'uploadFiles': 'Upload Additional Files',
        'currentFiles': 'Current Files',
        'noFiles': 'No files available',
        'multipleFileUpload': 'You can select multiple files to upload at once.',
        'changeVoteTitle': 'Change Vote: ',
        'selectNewVote': 'Please select a new voting option you want to change to',
        'selectNewOption': 'Select New Option',
        'currentSelection': 'Your Current Selection',
        'submitNewVote': 'Submit New Vote',
        'clearQuestion': 'Design a clear, specific question',
        'pollOptions': 'Poll Options',
        'option': 'Option',
        'endDate': 'End Date',
        'endDateHint': 'Set the end time for the poll',
        'back': 'Back',
        'deletePoll': 'Delete Poll',
        'confirmDeletePoll': 'Are you sure you want to delete this poll? This action cannot be undone.',
        'myVoteHistory': 'My Voting History',
        'noVoteHistory': 'You have not participated in any polls yet.',
        'yourChoice': 'Your Choice',
        'voteTime': 'Vote Time',
        'returnHome': 'Return to Home',
        'currentResults': 'Current Results',
        'yourCurrentChoice': 'Your Current Choice',
        'changeVote': 'Change Vote',
        'commentsSection': 'Comments',
        'courseDescription': 'Course Description',
        'addNewCourseMaterial': 'Add New Course Material',
        'userManagement': 'User Management',
        'actions': 'Actions',
        'writeComment': 'Write a comment...',
        'addnewcoursematerial': 'Add New Course Material',
        'ctitle': 'Course Title',
        'cdescription': 'Course Description',
        'LectureNotes': 'Lecture Notes(PDFs, Documents, etc.)',
        'availableCourses': 'Available Courses',
        "activePolls": "Active Polls",
        'accountType': 'Account Type',
        'noCoursesYet': 'No courses available yet.',
        'noPollsYet': 'No polls available yet.',
        'voteNow': 'Vote Now',
        'teacherToolsDesc':'As a teacher, you can create new courses, manage existing courses, and create voting activities. Make the most of these features to provide the best learning experience for your students.',
        'loginPrompt': 'Log in to personalize your learning experience, participate in discussions, and access all course content.',
        'loginNow' : 'Log in now',
        'alreadyMember': 'Already a Member?',
        'teacherTools': 'Teacher Tools',
        'submitVote': 'Submit Vote',
        'editFiles': 'Edit Files',
        'viewAll': 'View All',
        'noCommentsYet': 'There are no comments yet. Be the first to leave a comment!',
        'createNewCourse': 'Create New Course',
        'Profile': 'Profile',
        'UpdateProfile': 'Update Profile',
        'pphone': 'Phone Number',
        'MyCommentHistory': 'My Comment History',
        'noCommentHistory': 'You have not posted any comments yet.',
        'ViewCourse': 'View Course',
        'ViewPoll': 'View Poll',
        'backToCourseList': 'Back to Course List',
    }
};